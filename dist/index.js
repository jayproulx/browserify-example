(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
module.exports=APIConsumer=function(){this.initialized=!1,$.isReady?this.init():$(this.init.bind(this))},APIConsumer.prototype.init=function(){this.$doc=$(document),this.$p=$("#modalAPIConsumer"),this.$rooms=this.$p.find(".all-rooms"),this.$zones=this.$p.find(".all-zones"),this.$roomTpl=$($("#room-template").html()),this.$zoneTpl=$($("#zone-template").html()),this.data=void 0;var t=this.$p.find(".btn.reset");t.on("click",function(){this.log("User reset the automation API data to defaults"),this.$doc.trigger("load-defaults")}.bind(this)),this.initialized=!0},APIConsumer.prototype.log=function(t){$.get("/bin/logging.json",{message:t,time:(new Date).getTime()})},APIConsumer.prototype.setData=function(t){t&&(this.data=t,this.render(this.data.rooms,this.$rooms,this.$roomTpl,this.updateRoom.bind(this)),this.render(this.data.zones,this.$zones,this.$zoneTpl,this.updateZone.bind(this)))},APIConsumer.prototype.updateRoom=function(t,e,i){if(0!==t.length){var o=t.find(".btn.lights"),n=t.find(".room-name");n.text(e),o.off("click"),i.lights?o.addClass("active"):o.removeClass("active"),o.on("click",function(){var t=Object.create(i);t.lights=!t.lights,this.log("User updated room "+n.text()),this.$doc.trigger("update-room",[n.text(),t])}.bind(this))}},APIConsumer.prototype.updateZone=function(t,e,i){if(0!==t.length){var o=t.find(".zone-name"),n=t.find(".dropdown-menu li a"),s=t.find(".current-temperature");n.parent().removeClass("disabled"),n.off("click"),o.text(e),s.text(i.temperature),n.filter(function(){return $(this).data("temp")===i.temperature}).parent().addClass("disabled"),n.on("click",function(t){var e=Object.create(i);e.temperature=$(t.currentTarget).data("temp"),this.log("User updated zone "+o.text()),this.$doc.trigger("update-zone",[o.text(),e])}.bind(this))}},APIConsumer.prototype.render=function(t,e,i,o){var n;if(e.empty(),t)for(n in t)t.hasOwnProperty(n)&&this.renderItem(n,t[n],e,i,o)},APIConsumer.prototype.renderItem=function(t,e,i,o,n){var s=o.clone().addClass(t);i.append(s),n&&n(s,t,e)};
},{}],2:[function(require,module,exports){
var APIConsumer=require("./APIConsumer");$(function(){var e,o=$(document);e=new APIConsumer,o.on("defaults-loaded",function(o,u){e.log("Defaults were loaded successfully"),e.setData(u)}),o.on("room-updated",function(o,u,n){e.log("Room "+u+" was updated successfully"),e.updateRoom($(".room-template."+u),u,n)}),o.on("zone-updated",function(o,u,n){e.log("Zone "+u+" was updated successfully"),e.updateZone($(".zone-template."+u),u,n)})});
},{"./APIConsumer":1}]},{},[1,2])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlcyI6WyIvVXNlcnMvanByb3VseC9EZXNrdG9wL0FsbC9icm93c2VyaWZ5LWV4YW1wbGUvbm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcGFjay9fcHJlbHVkZS5qcyIsIi9Vc2Vycy9qcHJvdWx4L0Rlc2t0b3AvQWxsL2Jyb3dzZXJpZnktZXhhbXBsZS9qcy9BUElDb25zdW1lci5qcyIsIi9Vc2Vycy9qcHJvdWx4L0Rlc2t0b3AvQWxsL2Jyb3dzZXJpZnktZXhhbXBsZS9qcy9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBOztBQ0FBIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpfXZhciBmPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChmLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGYsZi5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJtb2R1bGUuZXhwb3J0cz1BUElDb25zdW1lcj1mdW5jdGlvbigpe3RoaXMuaW5pdGlhbGl6ZWQ9ITEsJC5pc1JlYWR5P3RoaXMuaW5pdCgpOiQodGhpcy5pbml0LmJpbmQodGhpcykpfSxBUElDb25zdW1lci5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3RoaXMuJGRvYz0kKGRvY3VtZW50KSx0aGlzLiRwPSQoXCIjbW9kYWxBUElDb25zdW1lclwiKSx0aGlzLiRyb29tcz10aGlzLiRwLmZpbmQoXCIuYWxsLXJvb21zXCIpLHRoaXMuJHpvbmVzPXRoaXMuJHAuZmluZChcIi5hbGwtem9uZXNcIiksdGhpcy4kcm9vbVRwbD0kKCQoXCIjcm9vbS10ZW1wbGF0ZVwiKS5odG1sKCkpLHRoaXMuJHpvbmVUcGw9JCgkKFwiI3pvbmUtdGVtcGxhdGVcIikuaHRtbCgpKSx0aGlzLmRhdGE9dm9pZCAwO3ZhciB0PXRoaXMuJHAuZmluZChcIi5idG4ucmVzZXRcIik7dC5vbihcImNsaWNrXCIsZnVuY3Rpb24oKXt0aGlzLmxvZyhcIlVzZXIgcmVzZXQgdGhlIGF1dG9tYXRpb24gQVBJIGRhdGEgdG8gZGVmYXVsdHNcIiksdGhpcy4kZG9jLnRyaWdnZXIoXCJsb2FkLWRlZmF1bHRzXCIpfS5iaW5kKHRoaXMpKSx0aGlzLmluaXRpYWxpemVkPSEwfSxBUElDb25zdW1lci5wcm90b3R5cGUubG9nPWZ1bmN0aW9uKHQpeyQuZ2V0KFwiL2Jpbi9sb2dnaW5nLmpzb25cIix7bWVzc2FnZTp0LHRpbWU6KG5ldyBEYXRlKS5nZXRUaW1lKCl9KX0sQVBJQ29uc3VtZXIucHJvdG90eXBlLnNldERhdGE9ZnVuY3Rpb24odCl7dCYmKHRoaXMuZGF0YT10LHRoaXMucmVuZGVyKHRoaXMuZGF0YS5yb29tcyx0aGlzLiRyb29tcyx0aGlzLiRyb29tVHBsLHRoaXMudXBkYXRlUm9vbS5iaW5kKHRoaXMpKSx0aGlzLnJlbmRlcih0aGlzLmRhdGEuem9uZXMsdGhpcy4kem9uZXMsdGhpcy4kem9uZVRwbCx0aGlzLnVwZGF0ZVpvbmUuYmluZCh0aGlzKSkpfSxBUElDb25zdW1lci5wcm90b3R5cGUudXBkYXRlUm9vbT1mdW5jdGlvbih0LGUsaSl7aWYoMCE9PXQubGVuZ3RoKXt2YXIgbz10LmZpbmQoXCIuYnRuLmxpZ2h0c1wiKSxuPXQuZmluZChcIi5yb29tLW5hbWVcIik7bi50ZXh0KGUpLG8ub2ZmKFwiY2xpY2tcIiksaS5saWdodHM/by5hZGRDbGFzcyhcImFjdGl2ZVwiKTpvLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpLG8ub24oXCJjbGlja1wiLGZ1bmN0aW9uKCl7dmFyIHQ9T2JqZWN0LmNyZWF0ZShpKTt0LmxpZ2h0cz0hdC5saWdodHMsdGhpcy5sb2coXCJVc2VyIHVwZGF0ZWQgcm9vbSBcIituLnRleHQoKSksdGhpcy4kZG9jLnRyaWdnZXIoXCJ1cGRhdGUtcm9vbVwiLFtuLnRleHQoKSx0XSl9LmJpbmQodGhpcykpfX0sQVBJQ29uc3VtZXIucHJvdG90eXBlLnVwZGF0ZVpvbmU9ZnVuY3Rpb24odCxlLGkpe2lmKDAhPT10Lmxlbmd0aCl7dmFyIG89dC5maW5kKFwiLnpvbmUtbmFtZVwiKSxuPXQuZmluZChcIi5kcm9wZG93bi1tZW51IGxpIGFcIikscz10LmZpbmQoXCIuY3VycmVudC10ZW1wZXJhdHVyZVwiKTtuLnBhcmVudCgpLnJlbW92ZUNsYXNzKFwiZGlzYWJsZWRcIiksbi5vZmYoXCJjbGlja1wiKSxvLnRleHQoZSkscy50ZXh0KGkudGVtcGVyYXR1cmUpLG4uZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuICQodGhpcykuZGF0YShcInRlbXBcIik9PT1pLnRlbXBlcmF0dXJlfSkucGFyZW50KCkuYWRkQ2xhc3MoXCJkaXNhYmxlZFwiKSxuLm9uKFwiY2xpY2tcIixmdW5jdGlvbih0KXt2YXIgZT1PYmplY3QuY3JlYXRlKGkpO2UudGVtcGVyYXR1cmU9JCh0LmN1cnJlbnRUYXJnZXQpLmRhdGEoXCJ0ZW1wXCIpLHRoaXMubG9nKFwiVXNlciB1cGRhdGVkIHpvbmUgXCIrby50ZXh0KCkpLHRoaXMuJGRvYy50cmlnZ2VyKFwidXBkYXRlLXpvbmVcIixbby50ZXh0KCksZV0pfS5iaW5kKHRoaXMpKX19LEFQSUNvbnN1bWVyLnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24odCxlLGksbyl7dmFyIG47aWYoZS5lbXB0eSgpLHQpZm9yKG4gaW4gdCl0Lmhhc093blByb3BlcnR5KG4pJiZ0aGlzLnJlbmRlckl0ZW0obix0W25dLGUsaSxvKX0sQVBJQ29uc3VtZXIucHJvdG90eXBlLnJlbmRlckl0ZW09ZnVuY3Rpb24odCxlLGksbyxuKXt2YXIgcz1vLmNsb25lKCkuYWRkQ2xhc3ModCk7aS5hcHBlbmQocyksbiYmbihzLHQsZSl9OyIsInZhciBBUElDb25zdW1lcj1yZXF1aXJlKFwiLi9BUElDb25zdW1lclwiKTskKGZ1bmN0aW9uKCl7dmFyIGUsbz0kKGRvY3VtZW50KTtlPW5ldyBBUElDb25zdW1lcixvLm9uKFwiZGVmYXVsdHMtbG9hZGVkXCIsZnVuY3Rpb24obyx1KXtlLmxvZyhcIkRlZmF1bHRzIHdlcmUgbG9hZGVkIHN1Y2Nlc3NmdWxseVwiKSxlLnNldERhdGEodSl9KSxvLm9uKFwicm9vbS11cGRhdGVkXCIsZnVuY3Rpb24obyx1LG4pe2UubG9nKFwiUm9vbSBcIit1K1wiIHdhcyB1cGRhdGVkIHN1Y2Nlc3NmdWxseVwiKSxlLnVwZGF0ZVJvb20oJChcIi5yb29tLXRlbXBsYXRlLlwiK3UpLHUsbil9KSxvLm9uKFwiem9uZS11cGRhdGVkXCIsZnVuY3Rpb24obyx1LG4pe2UubG9nKFwiWm9uZSBcIit1K1wiIHdhcyB1cGRhdGVkIHN1Y2Nlc3NmdWxseVwiKSxlLnVwZGF0ZVpvbmUoJChcIi56b25lLXRlbXBsYXRlLlwiK3UpLHUsbil9KX0pOyJdfQ==
